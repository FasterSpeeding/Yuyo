
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>yuyo.backoff - Hikari-Yuyo docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.2505c338.min.css">
        
      
      
  
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
  
  <style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2.5 7.775V2.75a.25.25 0 0 1 .25-.25h5.025a.25.25 0 0 1 .177.073l6.25 6.25a.25.25 0 0 1 0 .354l-5.025 5.025a.25.25 0 0 1-.354 0l-6.25-6.25a.25.25 0 0 1-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.75 1.75 0 0 1 1 7.775zM6 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/></svg>');--md-admonition-icon--abstract:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2.5 1.75a.25.25 0 0 1 .25-.25h8.5a.25.25 0 0 1 .25.25v7.736a.75.75 0 1 0 1.5 0V1.75A1.75 1.75 0 0 0 11.25 0h-8.5A1.75 1.75 0 0 0 1 1.75v11.5c0 .966.784 1.75 1.75 1.75h3.17a.75.75 0 0 0 0-1.5H2.75a.25.25 0 0 1-.25-.25V1.75zM4.75 4a.75.75 0 0 0 0 1.5h4.5a.75.75 0 0 0 0-1.5h-4.5zM4 7.75A.75.75 0 0 1 4.75 7h2a.75.75 0 0 1 0 1.5h-2A.75.75 0 0 1 4 7.75zm11.774 3.537a.75.75 0 0 0-1.048-1.074L10.7 14.145 9.281 12.72a.75.75 0 0 0-1.062 1.058l1.943 1.95a.75.75 0 0 0 1.055.008l4.557-4.45z"/></svg>');--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 1.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13zM0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm6.5-.25A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75zM8 6a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/></svg>');--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M3.499.75a.75.75 0 0 1 1.5 0v.996C5.9 2.903 6.793 3.65 7.662 4.376l.24.202c-.036-.694.055-1.422.426-2.163C9.1.873 10.794-.045 12.622.26 14.408.558 16 1.94 16 4.25c0 1.278-.954 2.575-2.44 2.734l.146.508.065.22c.203.701.412 1.455.476 2.226.142 1.707-.4 3.03-1.487 3.898C11.714 14.671 10.27 15 8.75 15h-6a.75.75 0 0 1 0-1.5h1.376a4.489 4.489 0 0 1-.563-1.191 3.833 3.833 0 0 1-.05-2.063 4.636 4.636 0 0 1-2.025-.293.75.75 0 1 1 .525-1.406c1.357.507 2.376-.006 2.698-.318l.009-.01a.748.748 0 0 1 1.06 0 .75.75 0 0 1-.012 1.074c-.912.92-.992 1.835-.768 2.586.221.74.745 1.337 1.196 1.621H8.75c1.343 0 2.398-.296 3.074-.836.635-.507 1.036-1.31.928-2.602-.05-.603-.216-1.224-.422-1.93l-.064-.221c-.12-.407-.246-.84-.353-1.29a2.404 2.404 0 0 1-.507-.441 3.063 3.063 0 0 1-.633-1.248.75.75 0 0 1 1.455-.364c.046.185.144.436.31.627.146.168.353.305.712.305.738 0 1.25-.615 1.25-1.25 0-1.47-.95-2.315-2.123-2.51-1.172-.196-2.227.387-2.706 1.345-.46.92-.27 1.774.019 3.062l.042.19a.753.753 0 0 1 .01.05c.348.443.666.949.94 1.553a.75.75 0 1 1-1.365.62c-.553-1.217-1.32-1.94-2.3-2.768a85.08 85.08 0 0 0-.317-.265c-.814-.68-1.75-1.462-2.692-2.619a3.74 3.74 0 0 0-1.023.88c-.406.495-.663 1.036-.722 1.508.116.122.306.21.591.239.388.038.797-.06 1.032-.19a.75.75 0 0 1 .728 1.31c-.515.287-1.23.439-1.906.373-.682-.067-1.473-.38-1.879-1.193L.75 5.677V5.5c0-.984.48-1.94 1.077-2.664.46-.559 1.05-1.055 1.673-1.353V.75z"/></svg>');--md-admonition-icon--success:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.75.75 0 0 1 1.06-1.06L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0z"/></svg>');--md-admonition-icon--question:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 1.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13zM0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm9 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM6.92 6.085c.081-.16.19-.299.34-.398.145-.097.371-.187.74-.187.28 0 .553.087.738.225A.613.613 0 0 1 9 6.25c0 .177-.04.264-.077.318a.956.956 0 0 1-.277.245c-.076.051-.158.1-.258.161l-.007.004a7.728 7.728 0 0 0-.313.195 2.416 2.416 0 0 0-.692.661.75.75 0 0 0 1.248.832.956.956 0 0 1 .276-.245 6.3 6.3 0 0 1 .26-.16l.006-.004c.093-.057.204-.123.313-.195.222-.149.487-.355.692-.662.214-.32.329-.702.329-1.15 0-.76-.36-1.348-.863-1.725A2.76 2.76 0 0 0 8 4c-.631 0-1.155.16-1.572.438-.413.276-.68.638-.849.977a.75.75 0 1 0 1.342.67z"/></svg>');--md-admonition-icon--warning:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575L6.457 1.047zM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-.25-5.25a.75.75 0 0 0-1.5 0v2.5a.75.75 0 0 0 1.5 0v-2.5z"/></svg>');--md-admonition-icon--failure:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M3.404 12.596a6.5 6.5 0 1 1 9.192-9.192 6.5 6.5 0 0 1-9.192 9.192zM2.344 2.343a8 8 0 1 0 11.313 11.314A8 8 0 0 0 2.343 2.343zM6.03 4.97a.75.75 0 0 0-1.06 1.06L6.94 8 4.97 9.97a.75.75 0 1 0 1.06 1.06L8 9.06l1.97 1.97a.75.75 0 1 0 1.06-1.06L9.06 8l1.97-1.97a.75.75 0 1 0-1.06-1.06L8 6.94 6.03 4.97z"/></svg>');--md-admonition-icon--danger:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M10.561 1.5a.016.016 0 0 0-.01.004L3.286 8.571A.25.25 0 0 0 3.462 9H6.75a.75.75 0 0 1 .694 1.034l-1.713 4.188 6.982-6.793A.25.25 0 0 0 12.538 7H9.25a.75.75 0 0 1-.683-1.06l2.008-4.418.003-.006a.02.02 0 0 0-.004-.009.02.02 0 0 0-.006-.006L10.56 1.5zM9.504.43a1.516 1.516 0 0 1 2.437 1.713L10.415 5.5h2.123c1.57 0 2.346 1.909 1.22 3.004l-7.34 7.142a1.25 1.25 0 0 1-.871.354h-.302a1.25 1.25 0 0 1-1.157-1.723L5.633 10.5H3.462c-1.57 0-2.346-1.909-1.22-3.004L9.503.429z"/></svg>');--md-admonition-icon--bug:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.72.22a.75.75 0 0 1 1.06 0l1 .999a3.492 3.492 0 0 1 2.441 0l.999-1a.75.75 0 1 1 1.06 1.061l-.775.776c.616.63.995 1.493.995 2.444v.327c0 .1-.009.197-.025.292.408.14.764.392 1.029.722l1.968-.787a.75.75 0 0 1 .556 1.392L13 7.258V9h2.25a.75.75 0 0 1 0 1.5H13v.5c0 .409-.049.806-.141 1.186l2.17.868a.75.75 0 0 1-.557 1.392l-2.184-.873A4.997 4.997 0 0 1 8 16a4.997 4.997 0 0 1-4.288-2.427l-2.183.873a.75.75 0 0 1-.558-1.392l2.17-.868A5.013 5.013 0 0 1 3 11v-.5H.75a.75.75 0 0 1 0-1.5H3V7.258L.971 6.446a.75.75 0 0 1 .558-1.392l1.967.787c.265-.33.62-.583 1.03-.722a1.684 1.684 0 0 1-.026-.292V4.5c0-.951.38-1.814.995-2.444L4.72 1.28a.75.75 0 0 1 0-1.06zM6.173 5h3.654A.173.173 0 0 0 10 4.827V4.5a2 2 0 1 0-4 0v.327c0 .096.077.173.173.173zM5.25 6.5a.75.75 0 0 0-.75.75V11a3.5 3.5 0 1 0 7 0V7.25a.75.75 0 0 0-.75-.75h-5.5z"/></svg>');--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 5.782V2.5h-.25a.75.75 0 0 1 0-1.5h6.5a.75.75 0 0 1 0 1.5H11v3.282l3.666 5.76C15.619 13.04 14.543 15 12.767 15H3.233c-1.776 0-2.852-1.96-1.899-3.458L5 5.782zM9.5 2.5h-3V6a.75.75 0 0 1-.117.403L4.73 9h6.54L9.617 6.403A.75.75 0 0 1 9.5 6V2.5zm-6.9 9.847L3.775 10.5h8.45l1.175 1.847a.75.75 0 0 1-.633 1.153H3.233a.75.75 0 0 1-.633-1.153z"/></svg>');--md-admonition-icon--quote:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.75 2.5a.75.75 0 0 0 0 1.5h10.5a.75.75 0 0 0 0-1.5H1.75zm4 5a.75.75 0 0 0 0 1.5h8.5a.75.75 0 0 0 0-1.5h-8.5zm0 5a.75.75 0 0 0 0 1.5h8.5a.75.75 0 0 0 0-1.5h-8.5zM2.5 7.75a.75.75 0 0 0-1.5 0v6a.75.75 0 0 0 1.5 0v-6z"/></svg>');}</style>


    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="cyan" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#yuyobackoff" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Hikari-Yuyo docs" class="md-header__button md-logo" aria-label="Hikari-Yuyo docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Hikari-Yuyo docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              yuyo.backoff
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="cyan" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
            </label>
          
        
          
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="cyan" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Hikari-Yuyo docs" class="md-nav__button md-logo" aria-label="Hikari-Yuyo docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Hikari-Yuyo docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../changelog/" class="md-nav__link">
        Changelog
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../usage/" class="md-nav__link">
        Usage
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        yuyo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../asgi/" class="md-nav__link">
        yuyo.asgi
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          yuyo.backoff
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        yuyo.backoff
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#yuyo.backoff" class="md-nav__link">
    yuyo.backoff
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#yuyo.backoff.Backoff" class="md-nav__link">
    Backoff
  </a>
  
    <nav class="md-nav" aria-label="Backoff">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#yuyo.backoff.Backoff.is_depleted" class="md-nav__link">
    is_depleted
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yuyo.backoff.Backoff.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yuyo.backoff.Backoff.backoff" class="md-nav__link">
    backoff()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yuyo.backoff.Backoff.finish" class="md-nav__link">
    finish()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yuyo.backoff.Backoff.reset" class="md-nav__link">
    reset()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yuyo.backoff.Backoff.set_next_backoff" class="md-nav__link">
    set_next_backoff()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#yuyo.backoff.ErrorManager" class="md-nav__link">
    ErrorManager
  </a>
  
    <nav class="md-nav" aria-label="ErrorManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#yuyo.backoff.ErrorManager.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yuyo.backoff.ErrorManager.add_rule" class="md-nav__link">
    add_rule()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yuyo.backoff.ErrorManager.clear_rules" class="md-nav__link">
    clear_rules()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../chunk_tracker/" class="md-nav__link">
        yuyo.chunk_tracker
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../components/" class="md-nav__link">
        yuyo.components
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../links/" class="md-nav__link">
        yuyo.links
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../list_status/" class="md-nav__link">
        yuyo.list_status
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pagination/" class="md-nav__link">
        yuyo.pagination
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reactions/" class="md-nav__link">
        yuyo.reactions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../to_builder/" class="md-nav__link">
        yuyo.to_builder
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#yuyo.backoff" class="md-nav__link">
    yuyo.backoff
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#yuyo.backoff.Backoff" class="md-nav__link">
    Backoff
  </a>
  
    <nav class="md-nav" aria-label="Backoff">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#yuyo.backoff.Backoff.is_depleted" class="md-nav__link">
    is_depleted
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yuyo.backoff.Backoff.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yuyo.backoff.Backoff.backoff" class="md-nav__link">
    backoff()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yuyo.backoff.Backoff.finish" class="md-nav__link">
    finish()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yuyo.backoff.Backoff.reset" class="md-nav__link">
    reset()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yuyo.backoff.Backoff.set_next_backoff" class="md-nav__link">
    set_next_backoff()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#yuyo.backoff.ErrorManager" class="md-nav__link">
    ErrorManager
  </a>
  
    <nav class="md-nav" aria-label="ErrorManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#yuyo.backoff.ErrorManager.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yuyo.backoff.ErrorManager.add_rule" class="md-nav__link">
    add_rule()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yuyo.backoff.ErrorManager.clear_rules" class="md-nav__link">
    clear_rules()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="yuyobackoff">yuyo.backoff<a class="headerlink" href="#yuyobackoff" title="Permanent link">#</a></h1>


<div class="doc doc-object doc-module">


<a id="yuyo.backoff"></a>
  <div class="doc doc-contents first">
  
      <p>Utility used for handling automatic back-off.</p>
<p>This can be used to cover cases such as hitting rate-limits and failed requests.</p>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="yuyo.backoff.Backoff" class="doc doc-heading">
        <span class="doc doc-object-name doc-class-name">Backoff</span>


<a href="#yuyo.backoff.Backoff" class="headerlink" title="Permanent link">#</a></h2>


  <div class="doc doc-contents ">

  
      <p>Used to exponentially backoff asynchronously.</p>
<p>This class acts as an asynchronous iterator and can be iterated over to
provide implicit backoff where for every iteration other than the first
this will either back off for the time passed to
<a class="autorefs autorefs-internal" href="#yuyo.backoff.Backoff.set_next_backoff">yuyo.backoff.Backoff.set_next_backoff</a> if applicable or a time calculated exponentially.</p>
<p>Each iteration yields the current retry count (starting at 0).</p>

<p><strong>Examples:</strong></p>
    <p>An example of using this class as an asynchronous iterator may look like
the following</p>
<div class="highlight"><pre><span></span><code><span class="c1"># While we can directly do `async for _ in Backoff()`, by assigning it to a</span>
<span class="c1"># variable we allow ourself to provide a specific backoff time in some cases.</span>
<span class="n">backoff</span> <span class="o">=</span> <span class="n">Backoff</span><span class="p">()</span>
<span class="k">async</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">backoff</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">message</span> <span class="o">=</span> <span class="k">await</span> <span class="n">bot</span><span class="o">.</span><span class="n">rest</span><span class="o">.</span><span class="n">fetch_message</span><span class="p">(</span><span class="n">channel_id</span><span class="p">,</span> <span class="n">message_id</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">errors</span><span class="o">.</span><span class="n">RateLimitedError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
        <span class="c1"># If we have a specific backoff time then set it for the next iteration</span>
        <span class="n">backoff</span><span class="o">.</span><span class="n">set_next_backoff</span><span class="p">(</span><span class="n">exc</span><span class="o">.</span><span class="n">retry_after</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">errors</span><span class="o">.</span><span class="n">InternalServerError</span><span class="p">:</span>
        <span class="c1"># Else let the iterator calculate an exponential backoff before the next loop.</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># We need to break out of the iterator to make sure it doesn&#39;t backoff again.</span>
        <span class="c1"># Alternatively `Backoff.finish()` can be called to break out of the loop.</span>
        <span class="k">break</span>
</code></pre></div>
<p>Alternatively you may want to explicitly call <a class="autorefs autorefs-internal" href="#yuyo.backoff.Backoff.backoff">yuyo.backoff.Backoff.backoff</a>, a
alternative of the previous example which uses <a class="autorefs autorefs-internal" href="#yuyo.backoff.Backoff.backoff">yuyo.backoff.Backoff.backoff</a>
may look like the following</p>
<div class="highlight"><pre><span></span><code><span class="n">backoff</span> <span class="o">=</span> <span class="n">Backoff</span><span class="p">()</span>
<span class="n">message</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">messages</span><span class="o">.</span><span class="n">Message</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="k">while</span> <span class="ow">not</span> <span class="n">message</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">message</span> <span class="o">=</span> <span class="k">await</span> <span class="n">bot</span><span class="o">.</span><span class="n">rest</span><span class="o">.</span><span class="n">fetch_message</span><span class="p">(</span><span class="n">channel_id</span><span class="p">,</span> <span class="n">message_id</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">errors</span><span class="o">.</span><span class="n">RateLimitedError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
        <span class="c1"># If we have a specific backoff time then set it for the next iteration.</span>
        <span class="k">await</span> <span class="n">backoff</span><span class="o">.</span><span class="n">backoff</span><span class="p">(</span><span class="n">exc</span><span class="o">.</span><span class="n">retry_after</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">errors</span><span class="o">.</span><span class="n">InternalServerError</span><span class="p">:</span>
        <span class="c1"># Else let the iterator calculate an exponential backoff before the next loop.</span>
        <span class="k">await</span> <span class="n">backoff</span><span class="o">.</span><span class="n">backoff</span><span class="p">()</span>
</code></pre></div>



  

  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="yuyo.backoff.Backoff.is_depleted" class="doc doc-heading">
        <span class="doc doc-object-name doc-attribute-name">is_depleted</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#yuyo.backoff.Backoff.is_depleted" class="headerlink" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">is_depleted</span><span class="p">:</span> <span class="nb">bool</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Whether "max_retries" has been reached.</p>
<p>This can be used to workout whether the loop was explicitly broken out
of using <a class="autorefs autorefs-internal" href="#yuyo.backoff.Backoff.finish">yuyo.backoff.Backoff.finish</a>/<code>break</code> or if it hit "max_retries".</p>
  </div>

</div>



<div class="doc doc-object doc-function">



<h3 id="yuyo.backoff.Backoff.__init__" class="doc doc-heading">
        <span class="doc doc-object-name doc-function-name">__init__</span>


<a href="#yuyo.backoff.Backoff.__init__" class="headerlink" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code><span class="fm">__init__</span><span class="p">(</span><span class="n">max_retries</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">base</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">maximum</span><span class="o">=</span><span class="mf">64.0</span><span class="p">,</span> <span class="n">jitter_multiplier</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">initial_increment</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Initialise a backoff instance.</p>

  <table>
    <thead>
      <tr>
        <th><b>PARAMETER</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>max_retries</code></td>
          <td class="doc-param-details">
            <p>The maximum amount of times this should iterate for between resets.</p>
<p>If left as <a class="autorefs autorefs-external" href="https://docs.python.org/3.9/library/constants.html#None">None</a> then this iterator will be unlimited.
This must be greater than or equal to 1.</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" href="https://docs.python.org/3.9/library/typing.html#module-typing">typing</a>.<a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3.9/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3.9/library/functions.html#int">int</a>]</code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>None</code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>base</code></td>
          <td class="doc-param-details">
            <p>The base to use.</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" href="https://docs.python.org/3.9/library/functions.html#float">float</a></code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>2.0</code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>maximum</code></td>
          <td class="doc-param-details">
            <p>The max value the backoff can be in a single iteration. Anything above
this will be capped to this base value plus random jitter.</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" href="https://docs.python.org/3.9/library/functions.html#float">float</a></code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>64.0</code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>jitter_multiplier</code></td>
          <td class="doc-param-details">
            <p>The multiplier for the random jitter.</p>
<p>Set to <code>0</code> to disable jitter.</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" href="https://docs.python.org/3.9/library/functions.html#float">float</a></code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>1.0</code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>initial_increment</code></td>
          <td class="doc-param-details">
            <p>The initial increment to start at.</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" href="https://docs.python.org/3.9/library/functions.html#int">int</a></code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>0</code>
                </span>
            </p>
          </td>
        </tr>
    </tbody>
  </table>

  <table>
    <thead>
      <tr>
        <th><b>RAISES</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
            <span class="doc-raises-annotation">
                <code><a class="autorefs autorefs-external" href="https://docs.python.org/3.9/library/exceptions.html#ValueError">ValueError</a></code>
            </span>
          </td>
          <td class="doc-raises-details">
            <p>If an <a class="autorefs autorefs-external" href="https://docs.python.org/3.9/library/functions.html#int">int</a> that's too big to be represented as a <a class="autorefs autorefs-external" href="https://docs.python.org/3.9/library/functions.html#float">float</a> or a
non-finite value is passed in place of a field that's annotated as
<a class="autorefs autorefs-external" href="https://docs.python.org/3.9/library/functions.html#float">float</a> or if <code>max_retries</code> is less than <code>1</code>.</p>
          </td>
        </tr>
    </tbody>
  </table>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="yuyo.backoff.Backoff.backoff" class="doc doc-heading">
        <span class="doc doc-object-name doc-function-name">backoff</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#yuyo.backoff.Backoff.backoff" class="headerlink" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">backoff</span><span class="p">()</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Sleep for the provided backoff or for the next exponent.</p>
<p>This provides an alternative to iterating over this class.</p>

  <table>
    <thead>
      <tr>
        <th><b>RETURNS</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
              <span class="doc-returns-annotation">
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3.9/library/functions.html#int">int</a> | None</code>
              </span>
          </td>
          <td class="doc-returns-details">
            <p>Whether this has reached the end of its iteration.</p>
<p>If this returns <a class="autorefs autorefs-external" href="https://docs.python.org/3.9/library/constants.html#True">True</a> then that call didn't sleep as this has
been marked as finished or has reached the max retries.</p>
          </td>
        </tr>
    </tbody>
  </table>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="yuyo.backoff.Backoff.finish" class="doc doc-heading">
        <span class="doc doc-object-name doc-function-name">finish</span>


<a href="#yuyo.backoff.Backoff.finish" class="headerlink" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">finish</span><span class="p">()</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Mark the iterator as finished to break out of the current loop.</p>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="yuyo.backoff.Backoff.reset" class="doc doc-heading">
        <span class="doc doc-object-name doc-function-name">reset</span>


<a href="#yuyo.backoff.Backoff.reset" class="headerlink" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">reset</span><span class="p">()</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Reset the backoff to it's original state to reuse it.</p>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="yuyo.backoff.Backoff.set_next_backoff" class="doc doc-heading">
        <span class="doc doc-object-name doc-function-name">set_next_backoff</span>


<a href="#yuyo.backoff.Backoff.set_next_backoff" class="headerlink" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">set_next_backoff</span><span class="p">(</span><span class="n">backoff_</span><span class="p">)</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Specify a backoff time for the next iteration or <a class="autorefs autorefs-internal" href="#yuyo.backoff.Backoff.backoff">yuyo.backoff.Backoff.backoff</a> call.</p>
<p>If this is called then the exponent won't be increased for this iteration.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Calling this multiple times in a single iteration will overwrite any
previously set next backoff.</p>
</div>

  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="yuyo.backoff.ErrorManager" class="doc doc-heading">
        <span class="doc doc-object-name doc-class-name">ErrorManager</span>


<a href="#yuyo.backoff.ErrorManager" class="headerlink" title="Permanent link">#</a></h2>


  <div class="doc doc-contents ">

  
      <p>A context manager provided to allow for more concise error handling with <a class="autorefs autorefs-internal" href="#yuyo.backoff.Backoff">yuyo.backoff.Backoff</a>.</p>

<p><strong>Examples:</strong></p>
    <p>The following is an example of using <a class="autorefs autorefs-internal" href="#yuyo.backoff.ErrorManager">yuyo.backoff.ErrorManager</a> alongside
<a class="autorefs autorefs-internal" href="#yuyo.backoff.Backoff">yuyo.backoff.Backoff</a> in-order to handle the exceptions which may be raised
while trying to reply to a message.</p>
<div class="highlight"><pre><span></span><code><span class="n">retry</span> <span class="o">=</span> <span class="n">Backoff</span><span class="p">()</span>
<span class="c1"># Rules can either be passed to `ErrorManager`&#39;s initiate as variable arguments</span>
<span class="c1"># or one at a time to `ErrorManager.with_rule` through possibly chained-calls.</span>
<span class="n">error_handler</span> <span class="o">=</span> <span class="p">(</span>
    <span class="c1"># For the 1st rule we catch two errors which would indicate the bot</span>
    <span class="c1"># no-longer has access to the target channel and break out of the</span>
    <span class="c1"># retry loop using `Backoff.retry`.</span>
    <span class="n">ErrorManager</span><span class="p">(((</span><span class="n">errors</span><span class="o">.</span><span class="n">NotFoundError</span><span class="p">,</span> <span class="n">errors</span><span class="o">.</span><span class="n">ForbiddenError</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="n">retry</span><span class="o">.</span><span class="n">finish</span><span class="p">()))</span>
        <span class="c1"># For the 2nd rule we catch rate limited errors and set their</span>
        <span class="c1"># `retry` value as the next backoff time before suppressing the</span>
        <span class="c1"># error to allow this to retry the request.</span>
        <span class="o">.</span><span class="n">with_rule</span><span class="p">((</span><span class="n">errors</span><span class="o">.</span><span class="n">RateLimitedError</span><span class="p">,),</span> <span class="k">lambda</span> <span class="n">exc</span><span class="p">:</span> <span class="n">retry</span><span class="o">.</span><span class="n">set_next_backoff</span><span class="p">(</span><span class="n">exc</span><span class="o">.</span><span class="n">retry_after</span><span class="p">))</span>
        <span class="c1"># For the 3rd rule we suppress the internal server error to allow</span>
        <span class="c1"># backoff to reach the next retry and exponentially backoff as we</span>
        <span class="c1"># don&#39;t have any specific retry time for this error.</span>
        <span class="o">.</span><span class="n">with_rule</span><span class="p">((</span><span class="n">errors</span><span class="o">.</span><span class="n">InternalServerError</span><span class="p">,),</span> <span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="kc">False</span><span class="p">)</span>
<span class="p">)</span>
<span class="k">async</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">retry</span><span class="p">:</span>
    <span class="c1"># We entre this context manager each iteration to catch errors before</span>
    <span class="c1"># they cause us to break out of the `Backoff` loop.</span>
    <span class="k">with</span> <span class="n">error_handler</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">message</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="s2">&quot;General Kenobi&quot;</span><span class="p">)</span>
        <span class="c1"># We need to break out of `retry` if this request succeeds.</span>
        <span class="k">break</span>
</code></pre></div>



  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="yuyo.backoff.ErrorManager.__init__" class="doc doc-heading">
        <span class="doc doc-object-name doc-function-name">__init__</span>


<a href="#yuyo.backoff.ErrorManager.__init__" class="headerlink" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">rules</span><span class="p">)</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Initialise an error manager instance.</p>

  <table>
    <thead>
      <tr>
        <th><b>PARAMETER</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>*rules</code></td>
          <td class="doc-param-details">
            <p>Rules to initiate this error context manager with.</p>
<p>These are each a 2-length tuple where the <code>tuple[0]</code> is an
iterable of types of the exceptions this rule should apply to
and <code>tuple[1]</code> is the rule's callback function.</p>
<p>The callback function will be called with the raised exception when it
matches one of the passed exceptions for the relevant rule and may
raise, return <a class="autorefs autorefs-external" href="https://docs.python.org/3.9/library/constants.html#True">True</a> to indicate that the current error should
be raised outside of the context manager or
<a class="autorefs autorefs-external" href="https://docs.python.org/3.9/library/constants.html#False">False</a>/<a class="autorefs autorefs-external" href="https://docs.python.org/3.9/library/constants.html#None">None</a> to suppress the current error.</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" href="https://docs.python.org/3.9/library/stdtypes.html#tuple">tuple</a>[<a class="autorefs autorefs-external" title="collections.abc" href="https://docs.python.org/3.9/library/collections.abc.html#module-collections.abc">collections</a>.<a class="autorefs autorefs-external" title="collections.abc.Iterable" href="https://docs.python.org/3.9/library/collections.abc.html#collections.abc.Iterable">Iterable</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3.9/library/functions.html#type">type</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3.9/library/exceptions.html#BaseException">BaseException</a>]], <a class="autorefs autorefs-external" title="collections.abc" href="https://docs.python.org/3.9/library/collections.abc.html#module-collections.abc">collections</a>.<a class="autorefs autorefs-external" title="collections.abc.Callable" href="https://docs.python.org/3.9/library/collections.abc.html#collections.abc.Callable">Callable</a>[[<a class="autorefs autorefs-external" href="https://docs.python.org/3.9/library/typing.html#module-typing">typing</a>.<a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3.9/library/typing.html#typing.Any">Any</a>], <a class="autorefs autorefs-external" href="https://docs.python.org/3.9/library/typing.html#module-typing">typing</a>.<a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3.9/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3.9/library/functions.html#bool">bool</a>]]]</code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>()</code>
                </span>
            </p>
          </td>
        </tr>
    </tbody>
  </table>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="yuyo.backoff.ErrorManager.add_rule" class="doc doc-heading">
        <span class="doc doc-object-name doc-function-name">add_rule</span>


<a href="#yuyo.backoff.ErrorManager.add_rule" class="headerlink" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">add_rule</span><span class="p">(</span><span class="n">exceptions</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Add a rule to this exception context manager.</p>

  <table>
    <thead>
      <tr>
        <th><b>PARAMETER</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>exceptions</code></td>
          <td class="doc-param-details">
            <p>An iterable of types of the exceptions this rule should apply to.</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" title="collections.abc" href="https://docs.python.org/3.9/library/collections.abc.html#module-collections.abc">collections</a>.<a class="autorefs autorefs-external" title="collections.abc.Iterable" href="https://docs.python.org/3.9/library/collections.abc.html#collections.abc.Iterable">Iterable</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3.9/library/functions.html#type">type</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3.9/library/exceptions.html#BaseException">BaseException</a>]]</code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>result</code></td>
          <td class="doc-param-details">
            <p>The function called with the raised exception when it matches one
of the passed <code>exceptions</code>.
This may raise, return <a class="autorefs autorefs-external" href="https://docs.python.org/3.9/library/constants.html#True">True</a> to indicate that the current
error should be raised outside of the context manager or
<a class="autorefs autorefs-external" href="https://docs.python.org/3.9/library/constants.html#False">False</a>/<a class="autorefs autorefs-external" href="https://docs.python.org/3.9/library/constants.html#None">None</a> to suppress the current error.</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" title="collections.abc" href="https://docs.python.org/3.9/library/collections.abc.html#module-collections.abc">collections</a>.<a class="autorefs autorefs-external" title="collections.abc.Callable" href="https://docs.python.org/3.9/library/collections.abc.html#collections.abc.Callable">Callable</a>[[<a class="autorefs autorefs-external" href="https://docs.python.org/3.9/library/typing.html#module-typing">typing</a>.<a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3.9/library/typing.html#typing.Any">Any</a>], <a class="autorefs autorefs-external" href="https://docs.python.org/3.9/library/typing.html#module-typing">typing</a>.<a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3.9/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3.9/library/functions.html#bool">bool</a>]]</code>
                </span>
            </p>
          </td>
        </tr>
    </tbody>
  </table>

  <table>
    <thead>
      <tr>
        <th><b>RETURNS</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
              <span class="doc-returns-annotation">
                  <code><span title="typing_extensions.Self">Self</span></code>
              </span>
          </td>
          <td class="doc-returns-details">
            <p>This returns the handler a rule was being added to in-order to
allow for chained calls.</p>
          </td>
        </tr>
    </tbody>
  </table>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="yuyo.backoff.ErrorManager.clear_rules" class="doc doc-heading">
        <span class="doc doc-object-name doc-function-name">clear_rules</span>


<a href="#yuyo.backoff.ErrorManager.clear_rules" class="headerlink" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">clear_rules</span><span class="p">()</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Clear the rules registered with this handler.</p>

  </div>

</div>



  </div>

  </div>

</div>




  </div>

  </div>

</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../asgi/" class="md-footer__link md-footer__link--prev" aria-label="Previous: yuyo.asgi" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              yuyo.asgi
            </div>
          </div>
        </a>
      
      
        
        <a href="../chunk_tracker/" class="md-footer__link md-footer__link--next" aria-label="Next: yuyo.chunk_tracker" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              yuyo.chunk_tracker
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
    
    
  </body>
</html>